const colors=['#FFFFFF','#EE0000','#0000F2','#FEFE00','#FFA100','#00D800'];const scheme=[[1,2,4,5],[5,3,2,0],[0,1,3,4],[5,4,2,1],[0,2,3,5],[4,3,1,0]];const perms=[{name:'skip',description:'PLL Skip',chance72:1,pieces:[[0,0,0],[1,1,1],[2,2,2],[3,3,3]]},{name:'e',description:'E Perm',chance72:2,pieces:[[1,0,3],[0,1,2],[3,2,1],[2,3,0]]},{name:'aa',description:'Aa Perm',chance72:4,pieces:[[0,0,2],[3,1,0],[1,2,1],[2,3,3]]},{name:'ab',description:'Ab Perm',chance72:4,pieces:[[1,0,1],[2,1,3],[0,2,2],[3,3,0]]},{name:'h',description:'H Perm',chance72:1,pieces:[[0,2,0],[1,3,1],[2,0,2],[3,1,3]]},{name:'z',description:'Z Perm',chance72:2,pieces:[[0,1,0],[1,0,1],[2,3,2],[3,2,3]]},{name:'ua',description:'Ua Perm',chance72:4,pieces:[[0,0,0],[1,2,1],[2,3,2],[3,1,3]]},{name:'ub',description:'Ub Perm',chance72:4,pieces:[[0,0,0],[1,3,1],[2,1,2],[3,2,3]]},{name:'v',description:'V Perm',chance72:4,pieces:[[0,0,2],[3,2,1],[2,1,0],[1,3,3]]},{name:'y',description:'Y Perm',chance72:4,pieces:[[0,0,2],[3,1,1],[2,3,0],[1,2,3]]},{name:'na',description:'Na Perm',chance72:1,pieces:[[2,0,0],[1,3,3],[0,2,2],[3,1,1]]},{name:'nb',description:'Nb Perm',chance72:1,pieces:[[0,0,2],[3,3,1],[2,2,0],[1,1,3]]},{name:'f',description:'F Perm',chance72:4,pieces:[[0,0,0],[1,3,2],[3,2,1],[2,1,3]]},{name:'t',description:'T Perm',chance72:4,pieces:[[0,0,1],[2,3,0],[1,2,2],[3,1,3]]},{name:'ja',description:'Ja Perm',chance72:4,pieces:[[3,3,0],[1,1,1],[2,2,3],[0,0,2]]},{name:'jb',description:'Jb Perm',chance72:4,pieces:[[0,1,1],[2,0,0],[1,2,2],[3,3,3]]},{name:'ra',description:'Ra Perm',chance72:4,pieces:[[1,0,3],[0,2,1],[2,1,2],[3,3,0]]},{name:'rb',description:'Rb Perm',chance72:4,pieces:[[0,1,0],[1,0,2],[3,2,1],[2,3,3]]},{name:'ga',description:'Ga Perm',chance72:4,pieces:[[3,2,3],[0,1,1],[2,3,0],[1,0,2]]},{name:'gb',description:'Gb Perm',chance72:4,pieces:[[1,3,2],[3,1,1],[2,0,3],[0,2,0]]},{name:'gc',description:'Gc Perm',chance72:4,pieces:[[1,2,1],[2,0,3],[0,1,2],[3,3,0]]},{name:'gd',description:'Gd Perm',chance72:4,pieces:[[2,1,3],[0,2,0],[1,0,2],[3,3,1]]},];var perm;var answer=false;function generateCube(){const topIndex=Math.floor(Math.random()*6);const leftIndex=Math.floor(Math.random()*4);const topTurn=Math.floor(Math.random()*4);const permIndex=Math.floor(Math.random()*perms.length);const permTurn=Math.floor(Math.random()*4);const topColor=colors[topIndex];const topScheme=scheme[topIndex]
const leftColor=colors[topScheme[leftIndex]];const rightColor=colors[topScheme[(leftIndex+1)%4]];const lleftColor=colors[topScheme[(leftIndex+2)%4]];const rrightColor=colors[topScheme[(leftIndex+3)%4]];$('.top').attr('fill',topColor);$('.left').attr('fill',leftColor);$('.right').attr('fill',rightColor);$('.lleft').attr('fill',lleftColor);$('.rright').attr('fill',rrightColor);perm=perms[permIndex];const lPerm=perm.pieces[permTurn];const rPerm=perm.pieces[(permTurn+1)%4];const pieceIndex=leftIndex+topTurn;const loColor=colors[topScheme[(pieceIndex+lPerm[0])%4]];const leColor=colors[topScheme[(pieceIndex+lPerm[1])%4]];const liColor=colors[topScheme[(pieceIndex+lPerm[2])%4]];const riColor=colors[topScheme[(pieceIndex+rPerm[0])%4]];const reColor=colors[topScheme[(pieceIndex+rPerm[1])%4]];const roColor=colors[topScheme[(pieceIndex+rPerm[2])%4]];$('#lo').attr('fill',loColor);$('#le').attr('fill',leColor);$('#li').attr('fill',liColor);$('#ri').attr('fill',riColor);$('#re').attr('fill',reColor);$('#ro').attr('fill',roColor);const llPerm=perm.pieces[(permTurn+2)%4];const rrPerm=perm.pieces[(permTurn+3)%4];const lloColor=colors[topScheme[(pieceIndex+llPerm[0])%4]];const lleColor=colors[topScheme[(pieceIndex+llPerm[1])%4]];const lliColor=colors[topScheme[(pieceIndex+llPerm[2])%4]];const rriColor=colors[topScheme[(pieceIndex+rrPerm[0])%4]];const rreColor=colors[topScheme[(pieceIndex+rrPerm[1])%4]];const rroColor=colors[topScheme[(pieceIndex+rrPerm[2])%4]];$('#llo').attr('fill',lloColor);$('#lle').attr('fill',lleColor);$('#lli').attr('fill',lliColor);$('#rri').attr('fill',rriColor);$('#rre').attr('fill',rreColor);$('#rro').attr('fill',rroColor);$('#answer').focus();}
function checkAnswer(){$('input[type=submit]').prop('disabled',true);$('#answer').prop('readonly',true);generateCube();$('#answer').prop('readonly',true);$('input[type=submit]').prop('disabled',false);return false;}
function onSubmit(){$('input[type=submit]').prop('disabled',true);answer=!answer;$('#answer').prop('readonly',answer);$('#result').prop('hidden',!answer);$('input[type=submit]').val(answer?'New':'Check');if(answer){var t=$('#answer').val().toLowerCase();if(t===perm.name){$('#result').removeClass('alert-danger').addClass('alert-success').text('Correct!');}else{$('#result').addClass('alert-danger').removeClass('alert-success').text('Correct answer: '+perm.description);;}
$('input[type=submit]').focus();}else{$('#answer').val('');generateCube();}
$('input[type=submit]').prop('disabled',false);return false;}
function onKeyUp(){$('input[type=submit]').prop('disabled',$('#answer').val().length===0);}
$(document).ready(function(){$('#mainForm').submit(onSubmit);$('#answer').keyup(onKeyUp);generateCube();});
